<h1>Tabs</h1>
<p>Tabs are a set of sections of content called tab panels which are displayed one at a time, each tab panel has a tab element associated with it which controls displaying the panel.</p>
<p>Tabs conforms to W3C WAI-ARIA authoring practices specified <a href="https://www.w3.org/TR/wai-aria-practices-1.1/#tabpanel">here</a>.</p>
<h2>Instantiation</h2>
<p>First import the styles into your main SASS file, replacing <code>../path/to</code> with the path to <em>node_modules</em> relative to the file:</p>
<pre><code class="language-scss">@import '../path/to/node_modules/@potato/ace/components/carousel/carousel'
</code></pre>
<p>Import the class into your JavaScript entry point:</p>
<pre><code class="language-js">import Tabs from '@potato/ace/components/tabs/tabs';
</code></pre>
<p>For the sake of convenience the ES6 class is exported as <code>Tabs</code>. To avoid name clashes the <code>as</code> keyword can be used when importing, e.g. <code>import Tabs as aceTabs from ...</code>. The attribute names used by the class are also exported as properties of <code>ATTRS</code>.</p>
<p>After <code>DOMContentLoaded</code> is fired, Select automatically instantiates an instance of itself within each <code>&lt;ace-tabs&gt;&lt;/ace-tabs&gt;</code> and adds IDs in the format <code>ace-tabs-(n)</code> to any instances without one, where <code>(n)</code> is the instance count.</p>
<h2>Usage</h2>
<!-- ADD USAGE AND INTERACTION INSTRUCTIONS HERE -->
<p>By default, the first tab is selected and so the panel content for the first tab is displayed. If a user clicks on a tab then the content for that tab will be revealed and the previous content hidden. When the tablist is focused, pressing <kbd>←</kbd> or <kbd>→</kbd> (<kbd>↑</kbd> or <kbd>↓</kbd> if tablist is vertical) will select the previous or next tab in the list and select it. Tabbing while focused on the tablist will then focus the content for the selected tab. Pressing <kbd>Home</kbd> when the tablist is focused will select the first tab in the tablist and <kbd>End</kbd> will select the last.</p>
<h2>Styles</h2>
<p>The following SASS is applied to the component, each declaration of which can be overridden by a single class selector. The SASS variables use <code>!default</code> so can also be easily overridden by users.</p>
<pre><code class="language-scss">@import '../../common/constants';


/* VARIABLES */
$ace-tabs-tablist-margin: $ace-spacing-2 !default;
$ace-tabs-tab-bg-colour: transparent !default;
$ace-tabs-tab-padding-horizontal: $ace-spacing-4 !default;
$ace-tabs-tab-padding-vertical: $ace-spacing-2 !default;
$ace-tabs-tab-hover-bg-colour: $ace-color-hover !default;
$ace-tabs-selected-tab-border-colour: $ace-color-focus !default;
$ace-tabs-selected-tab-border-width: 3px !default;


/* STYLES */
[ace-tabs-vertical] {
  display: flex;
}

[ace-tabs-tablist] {
  display: flex;
  margin: 0 0 $ace-tabs-tablist-margin 0;
  overflow: auto hidden;
  white-space: nowrap;
}

[ace-tabs-tab] {
  background-color: $ace-tabs-tab-bg-colour;
  border-color: transparent;
  border-style: solid;
  border-width: 0 0 $ace-tabs-selected-tab-border-width 0;
  cursor: pointer;
  padding: $ace-tabs-tab-padding-vertical $ace-tabs-tab-padding-horizontal;

  &amp;:hover {
    background-color: $ace-tabs-tab-hover-bg-colour;
  }

  &amp;:focus {
    // TODO: Add keyboard only focus
    background-color: $ace-tabs-tab-hover-bg-colour;
    outline: none;
  }
}

[ace-tabs-tab-visible=&quot;false&quot;] {
  display: none;
}

[ace-tabs-tab-selected] {
  border-bottom-color: $ace-tabs-selected-tab-border-colour;
}


// Vertical variant
[ace-tabs-tablist-vertical] {
  flex-direction: column;
  margin: 0 $ace-tabs-tablist-margin 0 0;
  overflow: hidden auto;
}

[ace-tabs-tab-vertical] {
  border-width: 0 $ace-tabs-selected-tab-border-width 0 0;

  &amp;[ace-tabs-tab-selected] {
    border-right-color: $ace-tabs-selected-tab-border-colour;
  }
}
</code></pre>
<h2>Custom events</h2>
<p>Tabs uses the following custom events, the names of which are available in its exported <code>EVENTS</code> object, similar to <code>ATTRS</code>, so they may be imported into other modules.</p>
<h3>Dispatched events</h3>
<p>The following events are dispatched on <code>window</code> by Tabs.</p>
<h4>Ready</h4>
<p><code>ace-tabs-ready</code></p>
<p>This event is dispatched when Tabs finishes initialising. The event name is available as <code>EVENTS.OUT.READY</code>, and its <code>detail</code> property is composed as follows:</p>
<pre><code class="language-js">'detail': {
  'id': // ID of Tabs [string]
}
</code></pre>
<h4>Tab changed</h4>
<p><code>ace-tabs-tab-changed</code></p>
<p>This event is dispatched when the selected tab changes. Listening for this event can be useful for timing and triggering animations on Tabs.</p>
<p>The event <code>detail</code> object is composed as follows:</p>
<pre><code class="language-js">'detail': {
  'id': // ID of Tabs [string]
  'currentlySelectedTab': {
    'id': // Currently selected tab ID [string]
    'number': // Currently selected tab number [number]
  },
  'previouslySelectedTab': {
    'id': // Previously selected tab ID [string]
    'number': // Previously selected tab number [number]
  }
}
</code></pre>
<h3>Listened for events</h3>
<p>Tabs listens for the following events, which should be dispatched by the user's code on the specific <code>ace-tabs</code> element.</p>
<h4>Previous tab</h4>
<p><code>ace-tabs-set-prev-tab</code></p>
<p>This event should be dispatched to select the previous tab, or the last tab if the first tab is selected and Tabs has attribute <code>ace-tabs-infinite</code>. The event name is available as <code>EVENTS.IN.SET_PREV_TAB</code>.</p>
<h4>Next tab</h4>
<p><code>ace-tabs-set-next-tab</code></p>
<p>This event should be dispatched to select the next tab, or the first tab if the last tab is selected and Tabs has attribute <code>ace-tabs-infinite</code>. The event name is available as <code>EVENTS.IN.SET_NEXT_TAB</code>.</p>
<h4>Update tabs</h4>
<p><code>ace-tabs-update</code></p>
<p>This event should be dispatched if tabs are added or removed to re-initialise Tabs. The event name is available as <code>EVENTS.IN.UPDATE</code>.</p>
<h2>Examples</h2>
<p>Each example contains a live demo and the HTML code that produced it. The code shown may differ slightly to that rendered for the demo as some components may alter their HTML when they initialise.</p>
<h3>Simple Tabs</h3>
<p>The default tabs, note that the tablist does not have an <code>aria-label</code> and so a warning will printed in the console and it will be assigned the default value <code>ace-tabs-basic-tablist</code>.</p>
<div class="example-block"><ace-tabs>
  <div aria-label="Basic Tabs">
    <button>Tab 1</button>
    <button>Tab 2</button>
    <button>Tab 3</button>
  </div>
  <div>
    <h3>Panel 1</h3>
  </div>
  <div>
    <h3>Panel 2</h3>
  </div>
  <div>
    <h3>Panel 3</h3>
  </div>
</ace-tabs>
</div>
<pre><code class="language-html">&lt;ace-tabs&gt;
  &lt;div aria-label=&quot;Basic Tabs&quot;&gt;
    &lt;button&gt;Tab 1&lt;/button&gt;
    &lt;button&gt;Tab 2&lt;/button&gt;
    &lt;button&gt;Tab 3&lt;/button&gt;
  &lt;/div&gt;
  &lt;div&gt;
    &lt;h3&gt;Panel 1&lt;/h3&gt;
  &lt;/div&gt;
  &lt;div&gt;
    &lt;h3&gt;Panel 2&lt;/h3&gt;
  &lt;/div&gt;
  &lt;div&gt;
    &lt;h3&gt;Panel 3&lt;/h3&gt;
  &lt;/div&gt;
&lt;/ace-tabs&gt;
</code></pre>
<h3>Tabs with infinite scroll</h3>
<p>Simple tabs but won't wrap to first/last element when cycling through tabs using <kbd>←</kbd> and <kbd>→</kbd> keys.</p>
<div class="example-block"><ace-tabs id="infinite-tabs" ace-tabs-infinite ace-tabs-selected-tab="2">
  <div aria-label="Tabs with infinite scroll">
    <button>Tab 1</button>
    <button>Tab 2</button>
    <button>Tab 3</button>
  </div>
  <div>
    <h3>Panel 1</h3>
  </div>
  <div>
    <h3>Panel 2</h3>
  </div>
  <div>
    <h3>Panel 3</h3>
  </div>
</ace-tabs>
</div>
<pre><code class="language-html">&lt;ace-tabs id=&quot;infinite-tabs&quot; ace-tabs-infinite ace-tabs-selected-tab=&quot;2&quot;&gt;
  &lt;div aria-label=&quot;Tabs with infinite scroll&quot;&gt;
    &lt;button&gt;Tab 1&lt;/button&gt;
    &lt;button&gt;Tab 2&lt;/button&gt;
    &lt;button&gt;Tab 3&lt;/button&gt;
  &lt;/div&gt;
  &lt;div&gt;
    &lt;h3&gt;Panel 1&lt;/h3&gt;
  &lt;/div&gt;
  &lt;div&gt;
    &lt;h3&gt;Panel 2&lt;/h3&gt;
  &lt;/div&gt;
  &lt;div&gt;
    &lt;h3&gt;Panel 3&lt;/h3&gt;
  &lt;/div&gt;
&lt;/ace-tabs&gt;
</code></pre>
<h3>Vertical Tabs</h3>
<p>If your tablist is vertical (e.g. when having the tabs appear next to the panel instead of above) add the <code>ace-tabs-vertical</code> attribute which will add <code>aria-orientation=&quot;vertical&quot;</code> to the tabslist element.</p>
<div class="example-block"><ace-tabs id="vertical-tabs" ace-tabs-vertical>
  <div aria-label="Tabs with vertically-oriented tablist">
    <button>Tab 1</button>
    <button>Tab 2</button>
    <button>Tab 3</button>
  </div>
  <div>
    <h3>Panel 1</h3>
  </div>
  <div>
    <h3>Panel 2</h3>
  </div>
  <div>
    <h3>Panel 3</h3>
  </div>
</ace-tabs>
</div>
<pre><code class="language-html">&lt;ace-tabs id=&quot;vertical-tabs&quot; ace-tabs-vertical&gt;
  &lt;div aria-label=&quot;Tabs with vertically-oriented tablist&quot;&gt;
    &lt;button&gt;Tab 1&lt;/button&gt;
    &lt;button&gt;Tab 2&lt;/button&gt;
    &lt;button&gt;Tab 3&lt;/button&gt;
  &lt;/div&gt;
  &lt;div&gt;
    &lt;h3&gt;Panel 1&lt;/h3&gt;
  &lt;/div&gt;
  &lt;div&gt;
    &lt;h3&gt;Panel 2&lt;/h3&gt;
  &lt;/div&gt;
  &lt;div&gt;
    &lt;h3&gt;Panel 3&lt;/h3&gt;
  &lt;/div&gt;
&lt;/ace-tabs&gt;
</code></pre>
<h3>Manually selected Tabs</h3>
<p>The Tabs in this example are selected when the user pressed the <kbd>Space</kbd> or <kbd>Enter</kbd> on a focussed tab.</p>
<div class="example-block"><ace-tabs id="manual-tabs" ace-tabs-infinite ace-tabs-manual>
  <div aria-label="Tabs with manual activation">
    <button>Tab 1</button>
    <button>Tab 2</button>
    <button>Tab 3</button>
  </div>
  <div>
    <h3>Panel 1</h3>
  </div>
  <div>
    <h3>Panel 2</h3>
  </div>
  <div>
    <h3>Panel 3</h3>
  </div>
</ace-tabs>
</div>
<pre><code class="language-html">&lt;ace-tabs id=&quot;manual-tabs&quot; ace-tabs-infinite ace-tabs-manual&gt;
  &lt;div aria-label=&quot;Tabs with manual activation&quot;&gt;
    &lt;button&gt;Tab 1&lt;/button&gt;
    &lt;button&gt;Tab 2&lt;/button&gt;
    &lt;button&gt;Tab 3&lt;/button&gt;
  &lt;/div&gt;
  &lt;div&gt;
    &lt;h3&gt;Panel 1&lt;/h3&gt;
  &lt;/div&gt;
  &lt;div&gt;
    &lt;h3&gt;Panel 2&lt;/h3&gt;
  &lt;/div&gt;
  &lt;div&gt;
    &lt;h3&gt;Panel 3&lt;/h3&gt;
  &lt;/div&gt;
&lt;/ace-tabs&gt;
</code></pre>
<h3>Custom Event Controlled Tabs</h3>
<p>In some cases you might want to customise tabs to limit the tabs which can be selectedd by the user at a particular point or create a paginated experience. To achieve this behaviour buttons which emit the <code>ace-tabs-set-tab</code>, <code>ace-tabs-next-tab</code> and <code>ace-tabs-prev-tab</code> can be used.</p>
<p>You may want tabs to be added, removed or updated after initial load and so the tabs component can be reloaded by emitting the <code>ace-tabs-update</code> event with the ID of the tabs element to update.</p>
<div class="example-block"><p>These buttons dispatch custom events</p>
<button id="prev-tab-btn">Prev tab</button>
<button id="next-tab-btn">Next tab</button>
<button id="add-tab-btn">Add tab to end</button>
<button id="remove-tab-btn">Remove last tab</button>
<hr>
<ace-tabs id="custom-events-tabs">
  <div aria-label="Tabs that repond to custom events">
    <button>Tab 1</button>
    <button>Tab 2</button>
    <button>Tab 3</button>
  </div>
  <div>
    <h3>Panel 1</h3>
  </div>
  <div>
    <h3>Panel 2</h3>
  </div>
  <div>
    <h3>Panel 3</h3>
  </div>
</ace-tabs>
</div>
<pre><code class="language-html">&lt;p&gt;These buttons dispatch custom events&lt;/p&gt;
&lt;button id=&quot;prev-tab-btn&quot;&gt;Prev tab&lt;/button&gt;
&lt;button id=&quot;next-tab-btn&quot;&gt;Next tab&lt;/button&gt;
&lt;button id=&quot;add-tab-btn&quot;&gt;Add tab to end&lt;/button&gt;
&lt;button id=&quot;remove-tab-btn&quot;&gt;Remove last tab&lt;/button&gt;

&lt;hr&gt;

&lt;ace-tabs id=&quot;custom-events-tabs&quot;&gt;
  &lt;div aria-label=&quot;Tabs that repond to custom events&quot;&gt;
    &lt;button&gt;Tab 1&lt;/button&gt;
    &lt;button&gt;Tab 2&lt;/button&gt;
    &lt;button&gt;Tab 3&lt;/button&gt;
  &lt;/div&gt;
  &lt;div&gt;
    &lt;h3&gt;Panel 1&lt;/h3&gt;
  &lt;/div&gt;
  &lt;div&gt;
    &lt;h3&gt;Panel 2&lt;/h3&gt;
  &lt;/div&gt;
  &lt;div&gt;
    &lt;h3&gt;Panel 3&lt;/h3&gt;
  &lt;/div&gt;
&lt;/ace-tabs&gt;
</code></pre>
<pre><code class="language-js">import {ATTRS, EVENTS} from '/ace/components/tabs/tabs.js';

document.addEventListener('DOMContentLoaded', () =&gt; {
  const tabsEl = document.getElementById('custom-events-tabs');
  const tablistEl = tabsEl.querySelector(`[${ATTRS.TABLIST}]`);

  const addTab = () =&gt; {
    const tabNumber = tablistEl.children.length + 1;
    const newTab = document.createElement('button');
    newTab.textContent = `Tab ${tabNumber}`;
    tablistEl.appendChild(newTab);

    const heading = document.createElement('h3');
    heading.textContent = `Panel ${tabNumber}`;
    const p = document.createElement('p');
    p.textContent = `This tab was added dynamically, after the carousel was initialised`;
    const newPanel = document.createElement('div');
    newPanel.setAttribute(ATTRS.PANEL, '');
    newPanel.appendChild(heading);
    newPanel.appendChild(p);
    tabsEl.appendChild(newPanel);
  };

  const removeTab = () =&gt; {
    tablistEl.removeChild(tablistEl.lastElementChild);
    tabsEl.removeChild(tabsEl.lastElementChild);
  };

  window.addEventListener('click', (e) =&gt; {
    const targetId = e.target.id;
    switch(targetId) {
      case 'prev-tab-btn':
      case 'next-tab-btn': {
        const event = EVENTS.IN[`SET_${targetId === 'prev-tab-btn' ? 'PREV' : 'NEXT'}_TAB`];
        tabsEl.dispatchEvent(new CustomEvent(event));
        break;
      }
      case 'add-tab-btn':
      case 'remove-tab-btn':
        if (targetId === 'add-tab-btn') {
          addTab();
        } else {
          removeTab();
        }
        tabsEl.dispatchEvent(new CustomEvent(EVENTS.IN.UPDATE));
        break;
    }
  });
});
</code></pre>
